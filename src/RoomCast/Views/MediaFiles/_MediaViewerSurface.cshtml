@model RoomCast.Models.ViewModels.MediaFilePreviewViewModel
@{
    var type = Model.FileType ?? string.Empty;
    var isDocument = string.Equals(type, "Document", StringComparison.OrdinalIgnoreCase);
    var isImage = string.Equals(type, "Picture", StringComparison.OrdinalIgnoreCase) ||
                  string.Equals(type, "Image", StringComparison.OrdinalIgnoreCase);
    var isVideo = string.Equals(type, "Video", StringComparison.OrdinalIgnoreCase);
}

<div class="flex h-full w-full items-center justify-center bg-slate-50 text-slate-700">
    @if (isDocument)
    {
        var embedUrl = Model.DocumentEmbedUrl ?? Model.FilePath;
        switch (Model.DocumentPreviewMode)
        {
            case RoomCast.Models.ViewModels.DocumentPreviewMode.Pdf:
                <iframe src="@($"{embedUrl}#toolbar=0&navpanes=0")"
                        title="@Model.Title"
                        class="h-full w-full rounded-xl border border-slate-200 bg-white shadow-xl"
                        loading="lazy"></iframe>
                break;
            case RoomCast.Models.ViewModels.DocumentPreviewMode.PlainText:
                <iframe src="@embedUrl"
                        title="@Model.Title"
                        class="h-full w-full rounded-xl border border-slate-200 bg-white text-left shadow-xl"
                        loading="lazy"></iframe>
                break;
            default:
                <div class="flex max-w-md flex-col items-center gap-3 text-center shadow-xl">
                    <i class="bi bi-file-earmark-text text-4xl text-slate-400"></i>
                    <p class="text-base font-medium text-slate-800">We can't preview this document yet.</p>
                    <p class="text-sm text-slate-500">Download the file to open it in the appropriate application.</p>
                    <a class="inline-flex items-center gap-2 rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400"
                       href="@Model.FilePath"
                       download>
                        <i class="bi bi-download"></i>
                        Download
                    </a>
                </div>
                break;
        }
    }
    else if (isImage)
    {
        <div class="flex h-full w-full items-center justify-center overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl">
            <img src="@Model.FilePath"
                 alt="@Model.Title"
                 class="max-h-full max-w-full object-contain" />
        </div>
    }
    else if (isVideo)
    {
        <div class="flex h-full w-full items-center justify-center overflow-hidden rounded-xl border border-slate-200 bg-black shadow-xl">
            <video class="h-full w-full max-h-full max-w-full bg-black"
                   controls
                   preload="metadata"
                   poster="@Model.ThumbnailPath">
                <source src="@Model.FilePath" type="@Model.ContentType" />
                Your browser does not support HTML5 video playback.
            </video>
        </div>
    }
    else
    {
        <div class="flex max-w-md flex-col items-center gap-3 rounded-xl border border-slate-200 bg-white px-8 py-10 text-center shadow-xl">
            <i class="bi bi-eye-slash text-4xl text-slate-400"></i>
            <p class="text-base font-medium text-slate-800">Preview is not available for this file type.</p>
            <p class="text-sm text-slate-500">Use the download link below to open it with another application.</p>
            <a class="inline-flex items-center gap-2 rounded-md bg-indigo-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-indigo-400"
               href="@Model.FilePath"
               download>
                <i class="bi bi-download"></i>
                Download
            </a>
        </div>
    }
</div>
